```{r, echo=FALSE}

#Retrieve information from the previously saved bookdown.info.txt file
PWD <- system("pwd", intern = TRUE)
Info <- paste0(PWD, "/bookdown.info.txt")
Data <- read.table(Info)
Source_code <- Data$V2[1]
Working_dir <- Data$V2[2]
Config_file <- Data$V2[3]

#Extract information from the Config_file
config <- sapply(yaml::read_yaml(Config_file),unlist)
sysConfig <- yaml::read_yaml(paste0(Source_code,"sys.yml"))
ProjectName <- config$prj_name

load(paste0(Working_dir,"../",ProjectName,".RData"))
NumberOfSamples <- dim(data_wide)[2]
NumberOfGroups <- length(unique(MetaData$group))
NumberOfGenes <- dim(data_wide)[1]
NumberOfComparisons <- dim(comp_info)[1]

EAOutputDir <- substr(Working_dir, 1, nchar(Working_dir)-15)
```

--- 
title: Bookdown report of `r ProjectName`
date: "Generated on `r Sys.Date()`"
site: bookdown::bookdown_site
---

# Introduction {-}

The ExpressionAnalysis (EA) pipeline analyzes RNAseq data provided by the user, or from the NCBI/GEO database, and generates results for interactive visualization. This report is part of Expression Analysis (EA) output, and contains key results of the project.

This is a summary report generated by EAreport (part of Expression Analysis) using Bookdown.

This report contains basic plots and tables generated by the pipeline.

### Project overview {-}

Here is a brief overview of the project:

- Project Name: **`r config$prj_name`**

- Species: **`r config$species`**

- Description: **`r config$shinyOne_Description`**

- Number of Samples: **`r NumberOfSamples`**

- Number of Groups: **`r NumberOfGroups`**

- Number of Genes/Proteins: **`r NumberOfGenes`**

- Number of Comparisons: **`r NumberOfComparisons`**

- Number of Samples in Each Group:

```{r, echo=FALSE}
suppressMessages(library(knitr))
suppressMessages(library(kableExtra))
Counting <- table(MetaData$group)
Table <- as.data.frame(matrix(nrow = 1,data = as.vector(Counting)))
colnames(Table) <- names(Counting)
row.names(Table) <- "count"

kable(Table, align = "c", booktabs = TRUE) %>%
  kable_styling() %>%
  kableExtra::scroll_box(width = "100%")
```

### Project files {-}

The EA pipeline also produced several files under the working directory:

- **notAdjusted_Covariate_PC_Results.rds**

- **notAdjusted_Covariate_PC_Results.xlsx**

- **notAdjusted_PCA_Plots.pdf**

- **notAdjusted_Significant_Categorical_Covariates.pdf**

- **notAdjusted_Significant_Numeric_Covariates.pdf**

- **sequenceQC.pdf**

- **sequenceQC.unionTop.TPM.csv**

For more flexible and interactive visualization, please upload the following Rdata files to [Quickomics](http://quickomics.bxgenomics.com/).

- **`r ProjectName`_estCount.rds**

- **`r ProjectName`_network.RData**

- **`r ProjectName`.RData**

- **`r ProjectName`.csv**

The following sections are included in this bookdown report:

1, QC plots

2, Covariates

3, PCA plots

4, Volcano plots

5, Heatmap plots
